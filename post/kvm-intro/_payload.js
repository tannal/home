export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO){return {data:{"content-query-5oDHBmYzDG":{_path:"\u002Fpost\u002Fkvm-intro",_dir:"post",_draft:D,_partial:D,_locale:"en",_empty:D,title:"KVM简介第一篇——Libvirt",description:"这是QEMU\u002FKVM系列文章的第一篇",excerpt:{type:Q,children:[{type:a,tag:m,props:{id:E},children:[{type:b,value:F}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:R}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:S}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:T}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:U}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:V}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:W}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:X}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:Y}]}]},{type:a,tag:m,props:{id:G},children:[{type:b,value:H}]},{type:a,tag:k,props:{},children:[{type:b,value:Z}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:_}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:y}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:z}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:A}]}]},{type:a,tag:m,props:{id:I},children:[{type:b,value:J}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:$}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:y}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:z}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:A}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:B,props:{alt:aa,src:ab},children:[]}]},{type:a,tag:k,props:{},children:[{type:b,value:ac}]},{type:a,tag:ad,props:{class:ae},children:[{type:a,tag:af,props:{},children:[{type:a,tag:ag,props:{name:ah,title:ai},children:[{type:a,tag:C,props:{code:K,language:aj},children:[{type:a,tag:ak,props:{},children:[{type:a,tag:C,props:{__ignoreMap:w},children:[{type:b,value:K}]}]}]}]}]}]},{type:a,tag:l,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:j,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:al}]},{type:a,tag:c,props:{},children:[{type:b,value:am}]},{type:a,tag:c,props:{},children:[{type:b,value:an}]},{type:a,tag:c,props:{},children:[{type:b,value:ao}]},{type:a,tag:c,props:{},children:[{type:b,value:ap}]},{type:a,tag:c,props:{},children:[{type:b,value:aq}]},{type:a,tag:c,props:{},children:[{type:b,value:ar}]},{type:a,tag:c,props:{},children:[{type:b,value:as}]},{type:a,tag:c,props:{},children:[{type:b,value:at}]},{type:a,tag:c,props:{},children:[{type:b,value:au}]},{type:a,tag:c,props:{},children:[{type:b,value:av}]},{type:a,tag:c,props:{},children:[{type:b,value:aw}]},{type:a,tag:c,props:{},children:[{type:b,value:ax}]}]},{type:a,tag:l,props:{id:r},children:[{type:b,value:r}]},{type:a,tag:j,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:ay}]},{type:a,tag:c,props:{},children:[{type:b,value:az}]},{type:a,tag:c,props:{},children:[{type:b,value:aA}]},{type:a,tag:c,props:{},children:[{type:b,value:aB}]},{type:a,tag:c,props:{},children:[{type:b,value:aC}]},{type:a,tag:c,props:{},children:[{type:b,value:aD}]},{type:a,tag:c,props:{},children:[{type:b,value:aE}]},{type:a,tag:c,props:{},children:[{type:b,value:aF}]}]},{type:a,tag:l,props:{id:s},children:[{type:b,value:s}]},{type:a,tag:k,props:{},children:[{type:a,tag:B,props:{alt:w,src:aG},children:[]}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aH}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aI}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aJ}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aK}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aL}]}]},{type:a,tag:m,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:l,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:k,props:{},children:[{type:b,value:aM}]},{type:a,tag:l,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:k,props:{},children:[{type:b,value:aN}]}]},date:"2022-11-10",author:"tannal",body:{type:Q,children:[{type:a,tag:m,props:{id:E},children:[{type:b,value:F}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:R}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:S}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:T}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:U}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:V}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:W}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:X}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:Y}]}]},{type:a,tag:m,props:{id:G},children:[{type:b,value:H}]},{type:a,tag:k,props:{},children:[{type:b,value:Z}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:_}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:y}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:z}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:A}]}]},{type:a,tag:m,props:{id:I},children:[{type:b,value:J}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:$}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:y}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:z}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:A}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:B,props:{alt:aa,src:ab},children:[]}]},{type:a,tag:k,props:{},children:[{type:b,value:ac}]},{type:a,tag:ad,props:{class:ae},children:[{type:a,tag:af,props:{},children:[{type:a,tag:ag,props:{name:ah,title:ai},children:[{type:a,tag:C,props:{code:K,language:aj},children:[{type:a,tag:ak,props:{},children:[{type:a,tag:C,props:{__ignoreMap:w},children:[{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:i},children:[{type:b,value:"struct"}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:" _virConnectDriver {"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:p},children:[{type:b,value:"\u002F* Whether driver permits a server in the URI *\u002F"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:" localOnly;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:p},children:[{type:b,value:"\u002F* Whether driver needs a server in the URI *\u002F"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:" remoteOnly;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:p},children:[{type:b,value:"\u002F* Whether driver can be used in embedded mode *\u002F"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:" embeddable;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:p},children:[{type:b,value:"\u002F*"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:p},children:[{type:b,value:"    * NULL terminated list of supported URI schemes."}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:p},children:[{type:b,value:"    *  - Single element { NULL } list indicates no supported schemes"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:p},children:[{type:b,value:"    *  - NULL list indicates wildcard supporting all schemes"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:p},children:[{type:b,value:"    *\u002F"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:"const"}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:aO}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:"char"}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:aO}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:"**"}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"uriSchemes;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virHypervisorDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"hypervisorDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virInterfaceDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"interfaceDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virNetworkDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"networkDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virNodeDeviceDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"nodeDeviceDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virNWFilterDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"nwfilterDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virSecretDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"secretDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"    virStorageDriver "}]},{type:a,tag:d,props:{class:i},children:[{type:b,value:q}]},{type:a,tag:d,props:{class:g},children:[{type:b,value:"storageDriver;"}]}]},{type:a,tag:d,props:{class:h},children:[{type:a,tag:d,props:{class:g},children:[{type:b,value:"};"}]}]}]}]}]}]}]}]},{type:a,tag:l,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:j,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:al}]},{type:a,tag:c,props:{},children:[{type:b,value:am}]},{type:a,tag:c,props:{},children:[{type:b,value:an}]},{type:a,tag:c,props:{},children:[{type:b,value:ao}]},{type:a,tag:c,props:{},children:[{type:b,value:ap}]},{type:a,tag:c,props:{},children:[{type:b,value:aq}]},{type:a,tag:c,props:{},children:[{type:b,value:ar}]},{type:a,tag:c,props:{},children:[{type:b,value:as}]},{type:a,tag:c,props:{},children:[{type:b,value:at}]},{type:a,tag:c,props:{},children:[{type:b,value:au}]},{type:a,tag:c,props:{},children:[{type:b,value:av}]},{type:a,tag:c,props:{},children:[{type:b,value:aw}]},{type:a,tag:c,props:{},children:[{type:b,value:ax}]}]},{type:a,tag:l,props:{id:r},children:[{type:b,value:r}]},{type:a,tag:j,props:{},children:[{type:a,tag:c,props:{},children:[{type:b,value:ay}]},{type:a,tag:c,props:{},children:[{type:b,value:az}]},{type:a,tag:c,props:{},children:[{type:b,value:aA}]},{type:a,tag:c,props:{},children:[{type:b,value:aB}]},{type:a,tag:c,props:{},children:[{type:b,value:aC}]},{type:a,tag:c,props:{},children:[{type:b,value:aD}]},{type:a,tag:c,props:{},children:[{type:b,value:aE}]},{type:a,tag:c,props:{},children:[{type:b,value:aF}]}]},{type:a,tag:l,props:{id:s},children:[{type:b,value:s}]},{type:a,tag:k,props:{},children:[{type:a,tag:B,props:{alt:w,src:aG},children:[]}]},{type:a,tag:j,props:{className:[n]},children:[{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aH}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aI}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aJ}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aK}]},{type:b,value:e},{type:a,tag:c,props:{className:[f]},children:[{type:b,value:aL}]}]},{type:a,tag:m,props:{id:t},children:[{type:b,value:t}]},{type:a,tag:l,props:{id:N},children:[{type:b,value:O}]},{type:a,tag:k,props:{},children:[{type:b,value:aM}]},{type:a,tag:l,props:{id:u},children:[{type:b,value:u}]},{type:a,tag:k,props:{},children:[{type:b,value:aN}]},{type:a,tag:"style",children:[{type:b,value:".ct-c70ddc{color:#6E7781}.ct-f600ff{color:#24292F}.ct-656821{color:#CF222E}.dark .ct-656821{color:#FF7B72}.dark .ct-f600ff{color:#C9D1D9}.dark .ct-c70ddc{color:#8B949E}"}]}],toc:{title:w,searchDepth:v,depth:v,links:[{id:E,depth:v,text:F},{id:G,depth:v,text:H},{id:I,depth:v,text:J,children:[{id:L,depth:x,text:M},{id:r,depth:x,text:r},{id:s,depth:x,text:s}]},{id:t,depth:v,text:t,children:[{id:N,depth:x,text:O},{id:u,depth:x,text:u}]}]}},_type:"markdown",_id:"content:post:kvm-intro.md",_source:"content",_file:"post\u002Fkvm-intro.md",_extension:"md"}},prerenderedAt:void 0}}("element","text","li","span","\n  ","list-disc","ct-f600ff","line","ct-656821","ul","p","h3","h2","ml-8","    ","ct-c70ddc","*","第二级driver以及对应目录","五个主要的对象以及它们之间的关系","qemu","virsh",2,"",3,"构建在hypervisor上面","Client-Server架构","实现vm的配置、添加、修改、监控、迁移等功能","img","code",false,"常见的-hypervisordriver","常见的 Hypervisor\u002FDriver","libvirt-简介","libvirt 简介","libvirt-结构","libvirt 结构","struct _virConnectDriver {\n    \u002F* Whether driver permits a server in the URI *\u002F\n    bool localOnly;\n    \u002F* Whether driver needs a server in the URI *\u002F\n    bool remoteOnly;\n    \u002F* Whether driver can be used in embedded mode *\u002F\n    bool embeddable;\n    \u002F*\n    * NULL terminated list of supported URI schemes.\n    *  - Single element { NULL } list indicates no supported schemes\n    *  - NULL list indicates wildcard supporting all schemes\n    *\u002F\n    const char **uriSchemes;\n    virHypervisorDriver *hypervisorDriver;\n    virInterfaceDriver *interfaceDriver;\n    virNetworkDriver *networkDriver;\n    virNodeDeviceDriver *nodeDeviceDriver;\n    virNWFilterDriver *nwfilterDriver;\n    virSecretDriver *secretDriver;\n    virStorageDriver *storageDriver;\n};\n","libvirt支持的hypervisor以及对应源码的目录","Libvirt支持的Hypervisor以及对应源码的目录","qemu是什么","qemu是什么？","bool","root","Xen","VMware","LXC","QEMU","VirtualBox","Microsoft Hyper-V（BSD hypervisor）","IBM PowerVM","OpenVZ","虽然是用C语言编写的，但是也有其他语言的Bindings，比如Java，Perl，C#，Python，Ruby","一个稳定的管理VM的API界面","driver-based architecture","driver-based-architecture-图片来自Master KVM Virtualization by Vedran Dakic | Humble Devassy Chirammal | Prasad Mukhedkar | Anil Vettathu","\u002Fassets\u002Fimages\u002Fdriver-based-architecture.png","Hypervisor是第一级driver，而诸如CPU、网络、disk等各种设备是第二级的driver（secondary-level driver)","div","py-4","tabs","tab","ts","C","c","pre","• esx\u002F: VMware ESX and GSX support using vSphere API over SOAP","• hyperv\u002F: Microsoft Hyper-V support using WinRM","• lxc\u002F: Linux native containers","• openvz\u002F: OpenVZ containers using CLI tools","• phyp\u002F: IBM Power Hypervisor using CLI tools over SSH","• qemu\u002F: QEMU\u002FKVM using the QEMU CLI\u002Fmonitor","• remote\u002F: Generic libvirt native RPC client","• test\u002F: A mock driver for testing","• uml\u002F: User-mode Linux","• vbox\u002F: VirtualBox using the native API","• vmware\u002F: VMware Workstation and Player using the vmrun tool","• xen\u002F: Xen using hypercalls, XenD SEXPR, and XenStore","• xenapi: Xen using libxenserver","• cpu\u002F: CPU feature management","• interface\u002F: Host network interface management","• network\u002F: Virtual NAT networking","• nwfilter\u002F: Network traffic filtering rules","• node_device\u002F: Host device enumeration","• secret\u002F: Secret management","• security\u002F: Mandatory access control drivers","• storage\u002F: Storage management drivers","\u002Fassets\u002Fimages\u002Fapi-objs.png","virConnectPtr: Libvirt需要连接到一个hypervisor，该对象代表了这种连接","virDomainPtr: host和guest都被叫做domain，该对象表示一个主机","virStorageVolPtr: 代表存储系统的一卷（volume）","virStoragePoolPtr: 一个volume是一个storage pool的一部分","virNetworkPtr: 代表一个虚拟网络","QEMU由Fabrice Bellard撰写，同时他也是ffmpeg的作者，以GPL协议开源。\n当它以emulater的角色工作时，它采用动态二进制翻译让机器可以跑另一种指令集的程序\u002FOS。\n负责翻译工作的部分叫做TCG，它其实是个JIT（just in time）编译器。\n当它以virtualizer的角色工作时，就需要监控vm，与KVM通信合作。","一个命令行程序用于管理虚拟机（libvirt-client）\n即使emulater也是virtualizer"," "))