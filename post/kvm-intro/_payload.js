export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI){return {data:{"content-query-5oDHBmYzDG":{_path:"\u002Fpost\u002Fkvm-intro",_dir:"post",_draft:P,_partial:P,_locale:"en",_empty:P,title:"虚拟化第一篇 Hypervisor、Libvirt、QEMU和KVM简介",description:"这是QEMU\u002FKVM系列文章的第一篇",excerpt:{type:al,children:[{type:a,tag:r,props:{id:Q},children:[{type:b,value:R}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:am}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:an}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ao}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ap}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aq}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ar}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:as}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:at}]}]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:j,props:{id:S},children:[{type:b,value:T}]},{type:a,tag:l,props:{},children:[{type:b,value:au}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:av}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aw}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ax}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ay}]}]},{type:a,tag:j,props:{id:U},children:[{type:b,value:V}]},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:az,src:aA},children:[]}]},{type:a,tag:l,props:{},children:[{type:b,value:aB}]},{type:a,tag:I,props:{class:J},children:[{type:a,tag:K,props:{},children:[{type:a,tag:L,props:{name:aC,title:M},children:[{type:a,tag:v,props:{code:W,language:N},children:[{type:a,tag:O,props:{},children:[{type:a,tag:v,props:{__ignoreMap:o},children:[{type:b,value:W}]}]}]}]}]}]},{type:a,tag:j,props:{id:X},children:[{type:b,value:Y}]},{type:a,tag:m,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aD}]},{type:a,tag:d,props:{},children:[{type:b,value:aE}]},{type:a,tag:d,props:{},children:[{type:b,value:aF}]},{type:a,tag:d,props:{},children:[{type:b,value:aG}]},{type:a,tag:d,props:{},children:[{type:b,value:aH}]},{type:a,tag:d,props:{},children:[{type:b,value:aI}]},{type:a,tag:d,props:{},children:[{type:b,value:aJ}]},{type:a,tag:d,props:{},children:[{type:b,value:aK}]},{type:a,tag:d,props:{},children:[{type:b,value:aL}]},{type:a,tag:d,props:{},children:[{type:b,value:aM}]},{type:a,tag:d,props:{},children:[{type:b,value:aN}]},{type:a,tag:d,props:{},children:[{type:b,value:aO}]},{type:a,tag:d,props:{},children:[{type:b,value:aP}]}]},{type:a,tag:j,props:{id:B},children:[{type:b,value:B}]},{type:a,tag:m,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aQ}]},{type:a,tag:d,props:{},children:[{type:b,value:aR}]},{type:a,tag:d,props:{},children:[{type:b,value:aS}]},{type:a,tag:d,props:{},children:[{type:b,value:aT}]},{type:a,tag:d,props:{},children:[{type:b,value:aU}]},{type:a,tag:d,props:{},children:[{type:b,value:aV}]},{type:a,tag:d,props:{},children:[{type:b,value:aW}]},{type:a,tag:d,props:{},children:[{type:b,value:aX}]}]},{type:a,tag:j,props:{id:C},children:[{type:b,value:C}]},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:o,src:aY},children:[]}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aZ}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:a_}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:a$}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ba}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bb}]}]},{type:a,tag:r,props:{id:D},children:[{type:b,value:D}]},{type:a,tag:j,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:l,props:{},children:[{type:b,value:bc},{type:a,tag:s,props:{alt:o,src:bd},children:[]}]},{type:a,tag:l,props:{},children:[{type:b,value:be},{type:a,tag:s,props:{alt:o,src:bf},children:[]}]},{type:a,tag:j,props:{id:E},children:[{type:b,value:E}]},{type:a,tag:l,props:{},children:[{type:b,value:bg},{type:a,tag:w,props:{},children:[]},{type:b,value:bh}]},{type:a,tag:I,props:{class:J},children:[{type:a,tag:K,props:{},children:[{type:a,tag:L,props:{name:bi,title:M},children:[{type:a,tag:v,props:{code:$,language:N},children:[{type:a,tag:O,props:{},children:[{type:a,tag:v,props:{__ignoreMap:o},children:[{type:b,value:$}]}]}]}]}]}]},{type:a,tag:j,props:{id:aa},children:[{type:b,value:ab}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bj}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bk}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bl}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bm}]}]},{type:a,tag:j,props:{id:ac},children:[{type:b,value:ad}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bn}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bo}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bp}]}]},{type:a,tag:j,props:{id:F},children:[{type:b,value:F}]},{type:a,tag:l,props:{},children:[{type:b,value:bq},{type:a,tag:w,props:{},children:[]},{type:b,value:br}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bs}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bt}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bu}]}]},{type:b,value:bv},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:o,src:bw},children:[]},{type:b,value:bx},{type:a,tag:w,props:{},children:[]},{type:b,value:by}]},{type:a,tag:r,props:{id:ae},children:[{type:b,value:af}]},{type:a,tag:j,props:{id:G},children:[{type:b,value:G}]},{type:a,tag:l,props:{},children:[{type:b,value:bz},{type:a,tag:w,props:{},children:[]},{type:b,value:bA}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bB}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bC}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bD}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bE}]}]},{type:b,value:bF},{type:a,tag:j,props:{id:H},children:[{type:b,value:H}]},{type:a,tag:l,props:{},children:[{type:b,value:bG}]},{type:a,tag:r,props:{id:ag},children:[{type:b,value:ah}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bH}]}]}]},date:"2022-11-10",author:"tannal",body:{type:al,children:[{type:a,tag:r,props:{id:Q},children:[{type:b,value:R}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:am}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:an}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ao}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ap}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aq}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ar}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:as}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:at}]}]},{type:a,tag:r,props:{id:A},children:[{type:b,value:A}]},{type:a,tag:j,props:{id:S},children:[{type:b,value:T}]},{type:a,tag:l,props:{},children:[{type:b,value:au}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:av}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aw}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ax}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ay}]}]},{type:a,tag:j,props:{id:U},children:[{type:b,value:V}]},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:az,src:aA},children:[]}]},{type:a,tag:l,props:{},children:[{type:b,value:aB}]},{type:a,tag:I,props:{class:J},children:[{type:a,tag:K,props:{},children:[{type:a,tag:L,props:{name:aC,title:M},children:[{type:a,tag:v,props:{code:W,language:N},children:[{type:a,tag:O,props:{},children:[{type:a,tag:v,props:{__ignoreMap:o},children:[{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" _virConnectDriver {"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F* Whether driver permits a server in the URI *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" localOnly;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F* Whether driver needs a server in the URI *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" remoteOnly;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F* Whether driver can be used in embedded mode *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" embeddable;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F*"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:q},children:[{type:b,value:"    * NULL terminated list of supported URI schemes."}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:q},children:[{type:b,value:"    *  - Single element { NULL } list indicates no supported schemes"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:q},children:[{type:b,value:"    *  - NULL list indicates wildcard supporting all schemes"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:q},children:[{type:b,value:"    *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"const"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"char"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"**"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"uriSchemes;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virHypervisorDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"hypervisorDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virInterfaceDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"interfaceDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virNetworkDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"networkDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virNodeDeviceDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"nodeDeviceDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virNWFilterDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"nwfilterDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virSecretDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"secretDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    virStorageDriver "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"storageDriver;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]}]}]}]}]}]}]},{type:a,tag:j,props:{id:X},children:[{type:b,value:Y}]},{type:a,tag:m,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aD}]},{type:a,tag:d,props:{},children:[{type:b,value:aE}]},{type:a,tag:d,props:{},children:[{type:b,value:aF}]},{type:a,tag:d,props:{},children:[{type:b,value:aG}]},{type:a,tag:d,props:{},children:[{type:b,value:aH}]},{type:a,tag:d,props:{},children:[{type:b,value:aI}]},{type:a,tag:d,props:{},children:[{type:b,value:aJ}]},{type:a,tag:d,props:{},children:[{type:b,value:aK}]},{type:a,tag:d,props:{},children:[{type:b,value:aL}]},{type:a,tag:d,props:{},children:[{type:b,value:aM}]},{type:a,tag:d,props:{},children:[{type:b,value:aN}]},{type:a,tag:d,props:{},children:[{type:b,value:aO}]},{type:a,tag:d,props:{},children:[{type:b,value:aP}]}]},{type:a,tag:j,props:{id:B},children:[{type:b,value:B}]},{type:a,tag:m,props:{},children:[{type:a,tag:d,props:{},children:[{type:b,value:aQ}]},{type:a,tag:d,props:{},children:[{type:b,value:aR}]},{type:a,tag:d,props:{},children:[{type:b,value:aS}]},{type:a,tag:d,props:{},children:[{type:b,value:aT}]},{type:a,tag:d,props:{},children:[{type:b,value:aU}]},{type:a,tag:d,props:{},children:[{type:b,value:aV}]},{type:a,tag:d,props:{},children:[{type:b,value:aW}]},{type:a,tag:d,props:{},children:[{type:b,value:aX}]}]},{type:a,tag:j,props:{id:C},children:[{type:b,value:C}]},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:o,src:aY},children:[]}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:aZ}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:a_}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:a$}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:ba}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bb}]}]},{type:a,tag:r,props:{id:D},children:[{type:b,value:D}]},{type:a,tag:j,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:l,props:{},children:[{type:b,value:bc},{type:a,tag:s,props:{alt:o,src:bd},children:[]}]},{type:a,tag:l,props:{},children:[{type:b,value:be},{type:a,tag:s,props:{alt:o,src:bf},children:[]}]},{type:a,tag:j,props:{id:E},children:[{type:b,value:E}]},{type:a,tag:l,props:{},children:[{type:b,value:bg},{type:a,tag:w,props:{},children:[]},{type:b,value:bh}]},{type:a,tag:I,props:{class:J},children:[{type:a,tag:K,props:{},children:[{type:a,tag:L,props:{name:bi,title:M},children:[{type:a,tag:v,props:{code:$,language:N},children:[{type:a,tag:O,props:{},children:[{type:a,tag:v,props:{__ignoreMap:o},children:[{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" KVMState"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"{"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" fd; "}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F\u002Fopen \u002Fdev\u002Fkvm 后的file descriptor"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" vmfd;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" coalesced_mmio;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" coalesced_pio;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" kvm_coalesced_mmio_ring "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"coalesced_mmio_ring;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" CPUState {"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" nr_cores;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" nr_threads;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" kvm_fd;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" KVMState "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"kvm_state;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" kvm_run "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"kvm_run;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:ak}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:"typedef"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:y}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" CPUArchState {"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F* standard registers *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    target_ulong "}]},{type:a,tag:c,props:{class:"ct-1bd13a"},children:[{type:b,value:"regs"}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:"[CPU_NB_REGS];"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    target_ulong eip;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" system_time_msr;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bI}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" wall_clock_msr;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:"\u002F* exception\u002Finterrupt handling *\u002F"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" error_code;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:k}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:e},children:[{type:b,value:" exception_is_int;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"    target_ulong exception_next_eip;"}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:x}]}]},{type:a,tag:c,props:{class:h},children:[{type:a,tag:c,props:{class:e},children:[{type:b,value:"} CPUX86State;"}]}]}]}]}]}]}]}]},{type:a,tag:j,props:{id:aa},children:[{type:b,value:ab}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bj}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bk}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bl}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bm}]}]},{type:a,tag:j,props:{id:ac},children:[{type:b,value:ad}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bn}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bo}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bp}]}]},{type:a,tag:j,props:{id:F},children:[{type:b,value:F}]},{type:a,tag:l,props:{},children:[{type:b,value:bq},{type:a,tag:w,props:{},children:[]},{type:b,value:br}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bs}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bt}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bu}]}]},{type:b,value:bv},{type:a,tag:l,props:{},children:[{type:a,tag:s,props:{alt:o,src:bw},children:[]},{type:b,value:bx},{type:a,tag:w,props:{},children:[]},{type:b,value:by}]},{type:a,tag:r,props:{id:ae},children:[{type:b,value:af}]},{type:a,tag:j,props:{id:G},children:[{type:b,value:G}]},{type:a,tag:l,props:{},children:[{type:b,value:bz},{type:a,tag:w,props:{},children:[]},{type:b,value:bA}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bB}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bC}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bD}]},{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bE}]}]},{type:b,value:bF},{type:a,tag:j,props:{id:H},children:[{type:b,value:H}]},{type:a,tag:l,props:{},children:[{type:b,value:bG}]},{type:a,tag:r,props:{id:ag},children:[{type:b,value:ah}]},{type:a,tag:m,props:{className:[n]},children:[{type:b,value:f},{type:a,tag:d,props:{className:[g]},children:[{type:b,value:bH}]}]},{type:a,tag:"style",children:[{type:b,value:".ct-1bd13a{color:#953800}.ct-e82e88{color:#6E7781}.ct-d3811c{color:#24292F}.ct-2de9c1{color:#CF222E}.dark .ct-2de9c1{color:#FF7B72}.dark .ct-d3811c{color:#C9D1D9}.dark .ct-e82e88{color:#8B949E}.dark .ct-1bd13a{color:#FFA657}"}]}],toc:{title:o,searchDepth:z,depth:z,links:[{id:Q,depth:z,text:R},{id:A,depth:z,text:A,children:[{id:S,depth:p,text:T},{id:U,depth:p,text:V},{id:X,depth:p,text:Y},{id:B,depth:p,text:B},{id:C,depth:p,text:C}]},{id:D,depth:z,text:D,children:[{id:Z,depth:p,text:_},{id:E,depth:p,text:E},{id:aa,depth:p,text:ab},{id:ac,depth:p,text:ad},{id:F,depth:p,text:F}]},{id:ae,depth:z,text:af,children:[{id:G,depth:p,text:G},{id:H,depth:p,text:H}]},{id:ag,depth:z,text:ah}]}},_type:"markdown",_id:"content:post:1.kvm-intro.md",_source:"content",_file:"post\u002F1.kvm-intro.md",_extension:"md"}},prerenderedAt:void 0}}("element","text","span","li","ct-d3811c","\n  ","list-disc","line","ct-2de9c1","h3","    ","p","ul","ml-8","",3,"ct-e82e88","h2","img","*","int","code","br","    ...","struct",2,"libvirt","第二级driver以及对应目录","五个主要的对象以及它们之间的关系","qemu","qemu源码预览","qemu的线程模型","概述","virsh","div","py-4","tabs","tab","C","c","pre",false,"常见的-hypervisordriver","常见的 Hypervisor\u002FDriver","libvirt-简介","libvirt 简介","libvirt-结构","libvirt 结构","struct _virConnectDriver {\n    \u002F* Whether driver permits a server in the URI *\u002F\n    bool localOnly;\n    \u002F* Whether driver needs a server in the URI *\u002F\n    bool remoteOnly;\n    \u002F* Whether driver can be used in embedded mode *\u002F\n    bool embeddable;\n    \u002F*\n    * NULL terminated list of supported URI schemes.\n    *  - Single element { NULL } list indicates no supported schemes\n    *  - NULL list indicates wildcard supporting all schemes\n    *\u002F\n    const char **uriSchemes;\n    virHypervisorDriver *hypervisorDriver;\n    virInterfaceDriver *interfaceDriver;\n    virNetworkDriver *networkDriver;\n    virNodeDeviceDriver *nodeDeviceDriver;\n    virNWFilterDriver *nwfilterDriver;\n    virSecretDriver *secretDriver;\n    virStorageDriver *storageDriver;\n};\n","libvirt支持的hypervisor以及对应源码的目录","Libvirt支持的Hypervisor以及对应源码的目录","qemu是什么","qemu是什么？","struct KVMState\n{\n    ...\n    int fd; \u002F\u002Fopen \u002Fdev\u002Fkvm 后的file descriptor\n    int vmfd;\n    int coalesced_mmio;\n    int coalesced_pio;\n    struct kvm_coalesced_mmio_ring *coalesced_mmio_ring;\n    ...\n};\nstruct CPUState {\n    ...\n    int nr_cores;\n    int nr_threads;\n    ...\n    int kvm_fd;\n    struct KVMState *kvm_state;\n    struct kvm_run *kvm_run;\n    ...\n};\ntypedef struct CPUArchState {\n    \u002F* standard registers *\u002F\n    target_ulong regs[CPU_NB_REGS];\n    target_ulong eip;\n    ...\n    uint64_t system_time_msr;\n    uint64_t wall_clock_msr;\n    ...\n    \u002F* exception\u002Finterrupt handling *\u002F\n    int error_code;\n    int exception_is_int;\n    target_ulong exception_next_eip;\n    ...\n} CPUX86State;\n","不同的-ioctl-对应的-fd","不同的 ioctl 对应的 fd","vcpu的创建和初始化","vCPU的创建和初始化","kvm","KVM","refernce","Refernce","bool"," ","};","root","Xen","VMware","LXC","QEMU","VirtualBox","Microsoft Hyper-V（BSD hypervisor）","IBM PowerVM","OpenVZ","虽然是用C语言编写的，但是也有其他语言的Bindings，比如Java，Perl，C#，Python，Ruby","一个稳定的管理VM的API界面","构建在hypervisor上面","Client-Server架构","实现vm的配置、添加、修改、监控、迁移等功能","driver-based-architecture","\u002Fassets\u002Fimages\u002Fdriver-based-architecture.png","Hypervisor是第一级driver，而诸如CPU、网络、disk等各种设备是第二级的driver（secondary-level driver)","ts","• esx\u002F: VMware ESX and GSX support using vSphere API over SOAP","• hyperv\u002F: Microsoft Hyper-V support using WinRM","• lxc\u002F: Linux native containers","• openvz\u002F: OpenVZ containers using CLI tools","• phyp\u002F: IBM Power Hypervisor using CLI tools over SSH","• qemu\u002F: QEMU\u002FKVM using the QEMU CLI\u002Fmonitor","• remote\u002F: Generic libvirt native RPC client","• test\u002F: A mock driver for testing","• uml\u002F: User-mode Linux","• vbox\u002F: VirtualBox using the native API","• vmware\u002F: VMware Workstation and Player using the vmrun tool","• xen\u002F: Xen using hypercalls, XenD SEXPR, and XenStore","• xenapi: Xen using libxenserver","• cpu\u002F: CPU feature management","• interface\u002F: Host network interface management","• network\u002F: Virtual NAT networking","• nwfilter\u002F: Network traffic filtering rules","• node_device\u002F: Host device enumeration","• secret\u002F: Secret management","• security\u002F: Mandatory access control drivers","• storage\u002F: Storage management drivers","\u002Fassets\u002Fimages\u002Fapi-objs.png","virConnectPtr: Libvirt需要连接到一个hypervisor，该对象代表了这种连接","virDomainPtr: host和guest都被叫做domain，该对象表示一个主机","virStorageVolPtr: 代表存储系统的一卷（volume）","virStoragePoolPtr: 一个volume是一个storage pool的一部分","virNetworkPtr: 代表一个虚拟网络","QEMU由Fabrice Bellard撰写，同时他也是ffmpeg的作者，以GPL协议开源。\n当它以emulater的角色工作时，它采用动态二进制翻译让机器可以跑另一种指令集的程序\u002FOS。\n负责翻译工作的部分叫做TCG，它其实是个JIT（just in time）编译器。\n","\u002Fassets\u002Fimages\u002Ftcg-qemu.png","当它以virtualizer的角色工作时，就需要监控vm，与KVM通信合作实现带有硬件加速的虚拟化（部分指令直接跑在host主机上）。qemu利用POSIX Thread做到了这一点，也就是说，guest的vCPU其实是host的thread。\n","\u002Fassets\u002Fimages\u002Fqemu-kvm.png","QEMU-KVM 维护了一组CPU（X86）structures， 每一个vCPU对应一个结构。","\n通用寄存器的内容记录在CPUState。","KVMState","kvm_ioctl: KVMState-\u003Efd","kvm_vm_ioctl: KVMState-\u003Evmfd","kvm_vcpu_ioctl: CPUState-\u003Ekvm_fd","kvm_device_ioctl: device fd","kvm_init: 该函数open了\u002Fdev\u002Fkvm，并填入fd和vmfd","kvm_init_vcpu: 该函数填入了CPUState-\u003Ekvm_fd，并使用mmap分配了一块与KVM共享的内存区域。","kvm_cpu_exec: 该函数invoke kvm_vcpu_ioctl with KVM_RUN","QEMU-KVM 是一个多线程的，事件驱动的应用。","\n比较重要的threads 有：","Main thread","Worker threads for the virtual disk I\u002FO backend","One thread for each vCPU","\n对于每一个host上的vm，都对应一个host上的qemu进程。如果vm关机，则该进程销毁退出。\nguest的结构大致如下：\n","\u002Fassets\u002Fimages\u002Fkvm-guest.png","\niothread 主要运行事件循环，如 main_loop_wait。\n主事件循环主要处理fd回调、bottom halves、timers等中断或io事件。","\n注：bottom halves是中断处理的后半部，它的特点是 low overhead;scheduling them is wait-free, thread-safe, and signal-safe.","加载了 kvm.ko 的 kernel 能发挥出 Hypervisor 的作用。","\nguest的物理地址空间是host的虚拟地址空间，包括 memory-mapped IO（kVM帮助实现了这一点）。\n除此之外，KVM还帮助我们做到了：","模拟指定的I\u002FO设备。","模拟指定的特权等级。","使用vmentry运行guest的code，vmexit处理事件。","还可以模拟事件，比如 virtual interrupt 和 page fault。","\nKVM本身不是 Hypervisor （就好像React并不是一个完整的MVVM框架），但 QEMU 和 emulators 让它加冕为王。再加上硬件的虚拟化支持，使 Linux Kernel 成为一个完整的 Hypervisor 。\n","一个命令行程序用于管理虚拟机（libvirt-client）。","图片来自 Master KVM Virtualization by Vedran Dakic | Humble Devassy Chirammal | Prasad Mukhedkar | Anil Vettathu","uint64_t"))